version: '3.7'
services:
  data-archive-frontend:
    image: data-archive-frontend
    container_name: data-archive-frontend
    build: 
      context: ${DATA_ARCHIVE_FRONTEND_BASE_DIR}
      dockerfile: Dockerfile.dev
    volumes: 
      - ${DATA_ARCHIVE_FRONTEND_BASE_DIR}:/opt/data-archive-frontend
    ports: 
      - ${DATA_ARCHIVE_FRONTEND_PORT}:3000
    restart: on-failure

  data-archive-backend:
    image: data-archive-backend
    container_name: data-archive-backend
    build: 
      context: ${DATA_ARCHIVE_BACKEND_BASE_DIR}
      dockerfile: Dockerfile.dev
    volumes: 
      - ${DATA_REQUEST_BASE_DIR}
      - ${DATA_ARCHIVE_BACKEND_BASE_DIR}:/opt/data-archive-backend
    ports: 
      - ${DATA_ARCHIVE_BACKEND_PORT}:4001
    restart: on-failure
  